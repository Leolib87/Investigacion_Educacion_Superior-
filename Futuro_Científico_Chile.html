<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>An치lisis de Carreras Cient칤ficas en Chile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: The application is structured as a single-page interactive dashboard. It starts with key highlights to grab user attention, followed by the main interactive tool. This tool combines a filterable bar chart for easy comparison of metrics (like employability and income) with a details panel that updates on click. This design was chosen over a simple static report to empower users (students, counselors) to actively explore and compare careers based on what matters most to them, fostering better understanding. The final section provides a comprehensive, sortable data table for advanced users who need to see all data at once. This flow guides the user from general insights to specific, personalized exploration. -->
    <!-- Visualization & Content Choices:
    - Report Info: Key career metrics (income, employability, enrollment). Goal: Compare. Viz/Presentation: Horizontal Bar Chart (Chart.js/Canvas). Interaction: Filter buttons change the metric displayed; clicking a bar shows details. Justification: Bar charts are excellent for comparing values across categories. Interactivity allows personalized data exploration.
    - Report Info: Detailed career descriptions and specific data points. Goal: Inform. Viz/Presentation: Dynamic Text Block (HTML/JS). Interaction: Content updates when a chart bar is clicked. Justification: Provides context-sensitive information without cluttering the main view.
    - Report Info: Full dataset for all careers. Goal: Organize/Reference. Viz/Presentation: Sortable HTML Table. Interaction: Clicking table headers sorts the data. Justification: Offers a complete and transparent view of the data for users who want to perform their own analysis.
    - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF7;
            color: #36454F;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            height: 450px;
            max-height: 60vh;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 400px;
                max-height: 70vh;
            }
        }
        .metric-card {
            background-color: #FFFFFF;
            border: 1px solid #EAEAEA;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .filter-btn {
            transition: background-color 0.2s, color 0.2s;
        }
        .filter-btn.active {
            background-color: #4682B4;
            color: #FFFFFF;
        }
        th {
            cursor: pointer;
            user-select: none;
        }
        th:hover {
            background-color: #F0F0F0;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white shadow-sm">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
            <h1 class="text-3xl font-bold leading-tight text-gray-900">Futuro Cient칤fico en Chile</h1>
            <p class="mt-2 text-gray-600">Una mirada interactiva a las carreras cient칤ficas con mayor demanda y proyecci칩n.</p>
        </div>
    </header>

    <main class="py-10">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
            
            <section id="highlights" class="mb-12">
                 <h2 class="text-2xl font-bold mb-4 px-4 sm:px-0">Datos Clave del Panorama Cient칤fico</h2>
                 <p class="mb-6 text-gray-600 px-4 sm:px-0">
                    Estos son algunos de los indicadores m치s destacados del mercado laboral para cient칤ficos en Chile. Reflejan las 치reas de mayor retorno econ칩mico, estabilidad laboral y popularidad entre los nuevos estudiantes, ofreciendo una visi칩n r치pida de las tendencias actuales.
                </p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 px-4 sm:px-0">
                    <div class="metric-card p-6 rounded-lg">
                        <h3 class="text-sm font-medium text-gray-500">游끥 Mayor Ingreso Promedio (5춿 a침o)</h3>
                        <p id="highest-income" class="mt-2 text-3xl font-bold text-[#4682B4]">Cargando...</p>
                        <p id="highest-income-career" class="text-gray-700">Cargando...</p>
                    </div>
                    <div class="metric-card p-6 rounded-lg">
                        <h3 class="text-sm font-medium text-gray-500">游늳 Mayor Empleabilidad (1er a침o)</h3>
                        <p id="highest-employability" class="mt-2 text-3xl font-bold text-[#4682B4]">Cargando...</p>
                        <p id="highest-employability-career" class="text-gray-700">Cargando...</p>
                    </div>
                    <div class="metric-card p-6 rounded-lg">
                        <h3 class="text-sm font-medium text-gray-500">游논 Mayor Matr칤cula Total (2023)</h3>
                        <p id="highest-enrollment" class="mt-2 text-3xl font-bold text-[#4682B4]">Cargando...</p>
                        <p id="highest-enrollment-career" class="text-gray-700">Cargando...</p>
                    </div>
                </div>
            </section>

            <section id="dashboard" class="bg-white p-6 rounded-lg shadow-sm mb-12">
                <h2 class="text-2xl font-bold mb-2">Explorador Interactivo de Carreras</h2>
                <p class="mb-6 text-gray-600">
                    Utiliza los filtros para comparar las carreras cient칤ficas seg칰n diferentes indicadores clave. Haz clic sobre una carrera en el gr치fico para ver su perfil detallado, proyecciones y campo laboral. Esta herramienta te permite analizar la informaci칩n desde la perspectiva que m치s te interese.
                </p>
                <div class="flex flex-wrap justify-center gap-2 mb-6">
                    <button class="filter-btn active px-4 py-2 text-sm font-medium rounded-md border" data-metric="employability1">Empleabilidad (1er a침o)</button>
                    <button class="filter-btn px-4 py-2 text-sm font-medium rounded-md border" data-metric="income5">Ingreso Promedio (5춿 a침o)</button>
                    <button class="filter-btn px-4 py-2 text-sm font-medium rounded-md border" data-metric="enrollmentTotal">Matr칤cula Total (2023)</button>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-2">
                        <div class="chart-container">
                            <canvas id="careersChart"></canvas>
                        </div>
                    </div>
                    <div id="details-panel" class="p-4 rounded-lg bg-gray-50 border">
                        <h3 class="font-bold text-lg mb-2">Selecciona una carrera</h3>
                        <p class="text-gray-600 text-sm">Haz clic en una de las barras del gr치fico para ver la informaci칩n detallada de esa carrera aqu칤.</p>
                    </div>
                </div>
            </section>
            
            <section id="data-table">
                <h2 class="text-2xl font-bold mb-4 px-4 sm:px-0">Tabla Comparativa Completa</h2>
                 <p class="mb-6 text-gray-600 px-4 sm:px-0">
                    Para un an치lisis m치s profundo, esta tabla contiene todos los datos utilizados en el explorador. Puedes ordenar la informaci칩n haciendo clic en los encabezados de las columnas para comparar directamente todas las carreras seg칰n el indicador que prefieras.
                </p>
                <div class="overflow-x-auto bg-white rounded-lg shadow-sm">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-sort="name">Carrera</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-sort="employability1">Empleabilidad (1er a침o)</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-sort="income5">Ingreso (5춿 a침o)</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-sort="enrollmentTotal">Matr칤cula Total</th>
                            </tr>
                        </thead>
                        <tbody id="careers-table-body" class="bg-white divide-y divide-gray-200">
                        </tbody>
                    </table>
                </div>
            </section>

        </div>
    </main>

    <footer class="bg-white mt-12 border-t">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 text-center text-sm text-gray-500">
            <p>&copy; 2025 An치lisis de Datos Educacionales. </p>
            <p class="mt-1">Fuente de datos: Agregado de informaci칩n p칰blica de MiFuturo.cl (MINEDUC), DEMRE y reportes de mercado. Los datos son referenciales.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const careersData = [
                {
                    id: 'geologia',
                    name: 'Geolog칤a',
                    employability1: 85.1,
                    income5: 2450000,
                    enrollmentTotal: 4520,
                    description: 'Estudia la composici칩n, estructura, din치mica e historia de la Tierra. Crucial para la miner칤a, energ칤a y gesti칩n de riesgos naturales, 치reas estrat칠gicas para Chile.',
                    outlook: 'Alta demanda en el sector minero y energ칠tico, aunque sujeta a ciclos econ칩micos. Creciente importancia en geotecnia, hidrolog칤a y evaluaci칩n de impacto ambiental.'
                },
                {
                    id: 'ing_biotecnologia',
                    name: 'Ing. en Biotecnolog칤a',
                    employability1: 79.5,
                    income5: 1850000,
                    enrollmentTotal: 3890,
                    description: 'Aplica principios de la ciencia y la ingenier칤a para el tratamiento de materiales por agentes biol칩gicos. Clave en sectores como la salud, acuicultura y agricultura.',
                    outlook: 'Campo en plena expansi칩n. Oportunidades en investigaci칩n y desarrollo (I+D), producci칩n de biof치rmacos, mejoramiento gen칠tico y bioremediaci칩n ambiental.'
                },
                {
                    id: 'quimica_farmacia',
                    name: 'Qu칤mica y Farmacia',
                    employability1: 96.3,
                    income5: 1980000,
                    enrollmentTotal: 12500,
                    description: 'Ciencia de la salud que vincula las ciencias qu칤micas con las ciencias biol칩gicas para el desarrollo, producci칩n, control y uso de f치rmacos.',
                    outlook: 'Demanda estable y alta, tanto en el sector p칰blico como privado (farmacias, laboratorios, industria cosm칠tica). Crecimiento en 치reas de investigaci칩n cl칤nica.'
                },
                {
                    id: 'astronomia',
                    name: 'Astronom칤a / Astrof칤sica',
                    employability1: 75.2,
                    income5: 1750000,
                    enrollmentTotal: 850,
                    description: 'Estudia los cuerpos celestes del universo, desde planetas y estrellas hasta galaxias y la cosmolog칤a. Chile es un polo mundial de observaci칩n astron칩mica.',
                    outlook: 'Campo altamente especializado y competitivo. Oportunidades en investigaci칩n acad칠mica y operaci칩n de observatorios internacionales. Habilidades en data science muy valoradas.'
                },
                {
                    id: 'biologia_marina',
                    name: 'Biolog칤a Marina',
                    employability1: 68.4,
                    income5: 1350000,
                    enrollmentTotal: 2900,
                    description: 'Estudia los organismos marinos y sus ecosistemas. Fundamental para la conservaci칩n y el manejo sustentable de recursos en un pa칤s con una extensa costa.',
                    outlook: 'Creciente relevancia por la crisis clim치tica y la necesidad de una acuicultura sostenible. Oportunidades en gesti칩n ambiental, investigaci칩n y consultor칤a.'
                },
                {
                    id: 'ciencia_datos',
                    name: 'Ciencia de Datos / Ing. Inform치tica',
                    employability1: 92.5,
                    income5: 2200000,
                    enrollmentTotal: 35000,
                    description: 'Extrae conocimiento y conclusiones de grandes vol칰menes de datos. Es una disciplina transversal que impacta a todas las dem치s 치reas cient칤ficas y empresariales.',
                    outlook: 'Demanda explosiva en todos los sectores. Esencial para la investigaci칩n moderna, la inteligencia de negocios y el desarrollo de inteligencia artificial.'
                },
                {
                    id: 'fisica',
                    name: 'Lic. en F칤sica',
                    employability1: 70.1,
                    income5: 1600000,
                    enrollmentTotal: 1200,
                    description: 'Busca comprender las leyes fundamentales que gobiernan la naturaleza, desde lo subat칩mico hasta el cosmos. Base para muchas otras disciplinas tecnol칩gicas.',
                    outlook: 'Principalmente orientada a la academia e investigaci칩n. Sus graduados son valorados en finanzas, data science y modelamiento complejo por su s칩lida formaci칩n anal칤tica.'
                },
                {
                    id: 'ciencias_ambientales',
                    name: 'Ing. en Cs. Ambientales',
                    employability1: 78.8,
                    income5: 1550000,
                    enrollmentTotal: 4100,
                    description: 'Integra diversas ciencias para estudiar los problemas ambientales y plantear soluciones sostenibles para el desarrollo humano y la conservaci칩n de la naturaleza.',
                    outlook: 'Demanda en fuerte crecimiento debido a la legislaci칩n ambiental, la necesidad de energ칤as renovables y la gesti칩n de la crisis h칤drica y de residuos.'
                }
            ];

            let chartInstance = null;
            let currentMetric = 'employability1';
            let sortConfig = { key: 'name', direction: 'asc' };

            const formatCurrency = (value) => new Intl.NumberFormat('es-CL', { style: 'currency', currency: 'CLP', minimumFractionDigits: 0 }).format(value);
            const formatPercentage = (value) => `${value}%`;
            const formatNumber = (value) => new Intl.NumberFormat('es-CL').format(value);

            function updateHighlights() {
                const highestIncome = [...careersData].sort((a, b) => b.income5 - a.income5)[0];
                document.getElementById('highest-income').textContent = formatCurrency(highestIncome.income5);
                document.getElementById('highest-income-career').textContent = highestIncome.name;

                const highestEmployability = [...careersData].sort((a, b) => b.employability1 - a.employability1)[0];
                document.getElementById('highest-employability').textContent = formatPercentage(highestEmployability.employability1);
                document.getElementById('highest-employability-career').textContent = highestEmployability.name;

                const highestEnrollment = [...careersData].sort((a, b) => b.enrollmentTotal - a.enrollmentTotal)[0];
                document.getElementById('highest-enrollment').textContent = formatNumber(highestEnrollment.enrollmentTotal);
                document.getElementById('highest-enrollment-career').textContent = highestEnrollment.name;
            }

            function updateDetailsPanel(career) {
                const panel = document.getElementById('details-panel');
                if (!career) {
                     panel.innerHTML = `
                        <h3 class="font-bold text-lg mb-2">Selecciona una carrera</h3>
                        <p class="text-gray-600 text-sm">Haz clic en una de las barras del gr치fico para ver la informaci칩n detallada de esa carrera aqu칤.</p>
                    `;
                    return;
                }

                panel.innerHTML = `
                    <h3 class="font-bold text-lg mb-2">${career.name}</h3>
                    <p class="text-sm text-gray-700 mb-4">${career.description}</p>
                    <div class="space-y-3 text-sm">
                        <div>
                            <p class="font-semibold text-gray-800">Empleabilidad (1er a침o):</p>
                            <p class="text-[#4682B4] font-bold">${formatPercentage(career.employability1)}</p>
                        </div>
                        <div>
                            <p class="font-semibold text-gray-800">Ingreso Promedio (5춿 a침o):</p>
                            <p class="text-[#4682B4] font-bold">${formatCurrency(career.income5)}</p>
                        </div>
                        <div>
                            <p class="font-semibold text-gray-800">Matr칤cula Total (2023):</p>
                            <p class="text-[#4682B4] font-bold">${formatNumber(career.enrollmentTotal)}</p>
                        </div>
                    </div>
                    <div class="mt-4 pt-4 border-t">
                        <h4 class="font-semibold text-md mb-1">Proyecci칩n y Campo Laboral</h4>
                        <p class="text-sm text-gray-600">${career.outlook}</p>
                    </div>
                `;
            }

            function renderChart() {
                const sortedData = [...careersData].sort((a, b) => b[currentMetric] - a[currentMetric]);
                const labels = sortedData.map(c => c.name);
                const dataValues = sortedData.map(c => c[currentMetric]);

                let labelText = '';
                let tooltipCallback;

                if (currentMetric === 'employability1') {
                    labelText = 'Empleabilidad al 1er a침o (%)';
                    tooltipCallback = (context) => `${context.label}: ${formatPercentage(context.raw)}`;
                } else if (currentMetric === 'income5') {
                    labelText = 'Ingreso Promedio al 5춿 a침o (CLP)';
                    tooltipCallback = (context) => `${context.label}: ${formatCurrency(context.raw)}`;
                } else {
                    labelText = 'Matr칤cula Total (2023)';
                    tooltipCallback = (context) => `${context.label}: ${formatNumber(context.raw)}`;
                }

                const chartData = {
                    labels: labels,
                    datasets: [{
                        label: labelText,
                        data: dataValues,
                        backgroundColor: 'rgba(70, 130, 180, 0.6)',
                        borderColor: 'rgba(70, 130, 180, 1)',
                        borderWidth: 1
                    }]
                };

                const ctx = document.getElementById('careersChart').getContext('2d');

                if (chartInstance) {
                    chartInstance.data = chartData;
                    chartInstance.options.plugins.tooltip.callbacks.label = tooltipCallback;
                    chartInstance.update();
                } else {
                    chartInstance = new Chart(ctx, {
                        type: 'bar',
                        data: chartData,
                        options: {
                            indexAxis: 'y',
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                },
                                tooltip: {
                                    callbacks: {
                                        label: tooltipCallback
                                    }
                                }
                            },
                            scales: {
                                x: {
                                    beginAtZero: true,
                                    title: {
                                        display: true,
                                        text: labelText
                                    }
                                }
                            },
                            onClick: (event, elements) => {
                                if (elements.length > 0) {
                                    const clickedIndex = elements[0].index;
                                    const career = sortedData[clickedIndex];
                                    updateDetailsPanel(career);
                                }
                            }
                        }
                    });
                }
            }

            function renderTable() {
                const sortedData = [...careersData].sort((a, b) => {
                    const valA = a[sortConfig.key];
                    const valB = b[sortConfig.key];
                    let comparison = 0;
                    if (valA > valB) {
                        comparison = 1;
                    } else if (valA < valB) {
                        comparison = -1;
                    }
                    return sortConfig.direction === 'asc' ? comparison : comparison * -1;
                });

                const tableBody = document.getElementById('careers-table-body');
                tableBody.innerHTML = sortedData.map(c => `
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${c.name}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${formatPercentage(c.employability1)}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${formatCurrency(c.income5)}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${formatNumber(c.enrollmentTotal)}</td>
                    </tr>
                `).join('');
            }
            
            document.querySelectorAll('.filter-btn').forEach(button => {
                button.addEventListener('click', () => {
                    document.querySelector('.filter-btn.active').classList.remove('active');
                    button.classList.add('active');
                    currentMetric = button.dataset.metric;
                    renderChart();
                });
            });

            document.querySelectorAll('th[data-sort]').forEach(header => {
                header.addEventListener('click', () => {
                    const key = header.dataset.sort;
                    if (sortConfig.key === key) {
                        sortConfig.direction = sortConfig.direction === 'asc' ? 'desc' : 'asc';
                    } else {
                        sortConfig.key = key;
                        sortConfig.direction = 'asc';
                    }
                    renderTable();
                });
            });

            updateHighlights();
            renderChart();
            renderTable();
        });
    </script>
</body>
</html>
